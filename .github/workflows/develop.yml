on: 
  push:
    branches:
      - develop
name: ðŸš€ Deploy to QA
jobs:
  build:
      runs-on: ubuntu-latest
      steps:
        - name: Checkout
          uses: actions/checkout@v3
  
        - name: Build theme
          run: |
            npm install
            npm run production
      
        - name: Upload artifact
          uses: actions/upload-artifact@v3
          with:
            name: my-theme-build
            path: footer.php
            retention-days: 0
  deploy:
      runs-on: ubuntu-latest
      needs: build
      steps:
        - name: Checkout
          uses: actions/checkout@v3
          with:
            # Fetch the entire Git history
            fetch-depth: 0
  
        - name: Download artifact
          uses: actions/download-artifact@v3
          with:
            name: my-theme-build
            path: .
  
        - name: ðŸ“‚ Sync files
          uses: Penguibird/FTP-Deploy-Action@4.2.0
          with:
            server: dev.receitasdoparaiso.pt
            username: ${{ secrets.ftp_username }}
            password: ${{ secrets.ftp_password }}
            server-dir: /wp-content/themes/receitasdoparaiso-theme/
